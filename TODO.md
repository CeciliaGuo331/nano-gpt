# 项目待办事项

## 项目概述
本项目旨在使用 Dolly 15k 数据集将基础 GPT-2 模型微调成一个能理解并执行指令的助手，并配备前端界面。

## 当前进度
- ✅ 基础模型复现完成
  - 已实现完整的 GPT-2 架构
  - 支持断点续训功能
  - 基础推理功能正常
- ✅ Web API 服务初步完成
  - Flask 服务框架搭建
  - 基本的生成接口实现
- ⚠️ 模型训练进行中
  - 已有多个检查点保存
  - 需要评估模型质量

## 核心任务清单

### 第一阶段：数据准备与微调 ⏳
- [ ] **准备 Dolly 15k 数据集**
  - [ ] 编写 `prepare_dolly.py` 脚本
  - [ ] 从 Hugging Face Hub 下载 Dolly 15k 数据集
  - [ ] 将数据格式化为指令-回答对
  - [ ] 切分训练集和验证集（90/10）
  - [ ] 保存为模型可读取的二进制格式
- [ ] **实现指令微调**
  - [ ] 复制 `train_gpt2.py` 为 `finetune_dolly.py`
  - [ ] 修改数据加载逻辑，指向 Dolly 数据集
  - [ ] 调整超参数（学习率降至 1e-5，epochs 设为 3）
  - [ ] 添加指令模板处理逻辑
  - [ ] 实现微调训练循环

### 第二阶段：模型评估与优化 🔄
- [ ] **基线评估**
  - [ ] 记录微调前的 Validation Loss
  - [ ] 记录微调前的 HellaSwag 准确率
  - [ ] 保存微调前的生成样本
- [ ] **微调后评估**
  - [ ] 记录微调后的 Validation Loss
  - [ ] 记录微调后的 HellaSwag 准确率
  - [ ] 生成并对比指令遵循能力
  - [ ] 整理对比数据用于报告
- [ ] **模型优化**
  - [ ] 实现 beam search 生成策略
  - [ ] 添加重复惩罚机制
  - [ ] 优化推理速度

### 第三阶段：前端界面开发 🎨
- [ ] **创建前端页面**
  - [ ] 设计简洁的 HTML 界面 (`static/index.html`)
  - [ ] 实现输入框和生成按钮
  - [ ] 添加参数调节控件（temperature, top_k）
  - [ ] 美化界面样式（CSS）
- [ ] **实现前后端交互**
  - [ ] 编写 JavaScript 异步调用逻辑 (`static/app.js`)
  - [ ] 处理 API 响应并显示结果
  - [ ] 添加加载动画和错误处理
  - [ ] 实现历史对话记录功能
- [ ] **增强用户体验**
  - [ ] 添加预设提示词模板
  - [ ] 实现流式输出（可选）
  - [ ] 添加复制按钮
  - [ ] 响应式设计支持移动端

### 第四阶段：工程化完善 🔧
- [ ] **API 功能增强**
  - [ ] 添加请求参数验证
  - [ ] 实现 API 限流机制
  - [ ] 添加 CORS 支持
  - [ ] 完善错误处理和日志
- [ ] **部署准备**
  - [ ] 编写 requirements.txt
  - [ ] 创建 Docker 镜像（可选）
  - [ ] 编写部署文档
  - [ ] 添加环境变量配置
- [ ] **性能优化**
  - [ ] 实现模型缓存机制
  - [ ] 添加批处理支持
  - [ ] 优化内存使用

### 第五阶段：文档与报告 📝
- [ ] **代码文档完善**
  - [ ] 为所有模块添加 docstring
  - [ ] 整理代码结构，确保模块化
  - [ ] 更新 README.md，添加使用说明
  - [ ] 创建 API 文档
- [ ] **撰写实验报告（3000字）**
  - [ ] 引言：项目背景与目标（300字）
  - [ ] 相关工作：GPT架构与指令微调技术（600字）
  - [ ] 方法：数据处理、模型架构、训练策略（800字）
  - [ ] 实验结果：对比分析、可视化图表（800字）
  - [ ] 讨论与总结：成果、局限性、未来工作（500字）
- [ ] **准备演示材料**
  - [ ] 录制演示视频
  - [ ] 准备 PPT（如需要）
  - [ ] 整理关键代码片段

## 技术债务与优化项
- [ ] 添加单元测试
- [ ] 实现更完善的日志系统
- [ ] 优化数据加载性能
- [ ] 支持多 GPU 训练
- [ ] 实现模型量化以减小体积

## 注意事项
1. **优先级**：按阶段顺序完成，确保每个阶段都有可交付成果
2. **时间管理**：预留充足时间用于调试和优化
3. **版本控制**：定期提交代码，保持良好的 commit 记录
4. **备份**：重要的模型检查点要及时备份
5. **测试**：每个功能完成后都要进行充分测试

## 快速开始检查清单
- [ ] Python 环境配置正确（3.8+）
- [ ] PyTorch 和 CUDA 安装正常
- [ ] 基础模型训练可以正常运行
- [ ] Flask 服务可以正常启动
- [ ] 有足够的磁盘空间存储数据和模型

## 项目里程碑
1. **里程碑1**：完成 Dolly 数据准备和微调脚本
2. **里程碑2**：成功微调出能遵循指令的模型
3. **里程碑3**：前端界面可以正常交互
4. **里程碑4**：完成所有文档和报告

---
最后更新：2025-07-10